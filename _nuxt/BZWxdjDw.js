import{y as b,at as g,aC as h,x as y,u as k,z as w,w as e,C as l,d as C,a2 as a,f as i,W as v,g as n,Z as N,t as I,h as S,aD as $,aE as A}from"#entry";import{_ as T}from"./CYF2LoiS.js";import{o as U,s as p,u as j,e as B}from"./CgWs44Z7.js";import"./CDm15xO7.js";import"./BCpN_f7O.js";import"./B68Y4G0P.js";import"./D-t1f3uf.js";import"./By4ZTqVd.js";import"./toFnr21D.js";import"./Dbrn_ZZh.js";import"./DivUpmYq.js";import"./BOGYLXwb.js";import"./FFK1d6Mv.js";const V={class:"flex items-center flex-col gap-4 justify-center"},q={class:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center"},D={class:"text-2xl font-bold text-center"},E={class:"pt-2"},X=b({__name:"login",setup(O){g({title:"登录",description:"登录后继续"});const c=h(),r=y(),d=[{name:"email",type:"text",label:"用户名或者电子邮箱",placeholder:"请输入您的用户名或者电子邮箱",required:!0},{name:"password",label:"密码",type:"password",placeholder:"请输入您的密码",required:!0},{name:"remember",label:"记住我",type:"checkbox"}],u=U({email:j([B("无效电子邮箱"),p("不能为空").min(1)]),password:p().min(6,"至少6个字符")}),{$api:f}=k();async function _(m){const t=await f("/Account/login",{method:"POST",body:{...m.data,username:m.data.email}}).catch(o=>{c.add({title:"登录失败",description:o?.data?.message||"请稍后再试",color:"error"})});if(t?.token){const o=S("userInfo");o.value&&=JSON.stringify(t),$(t),c.add({title:"登录成功",description:`欢迎回来！${t.user.userName}`,color:"success"});const s=t.user.role!==r.appInfo.roleEnum.student?"/teacher":"/student";return A(s)}}return(m,t)=>{const o=N,s=v,x=T;return C(),w(x,{fields:d,schema:l(u),title:l(r).appInfo.title,submit:{label:"登录",block:!0},icon:"i-lucide-book-open-text",onSubmit:_},{header:e(()=>[n("div",V,[n("div",q,[i(o,{name:"i-lucide-book-open-text",class:"w-8 h-8 text-white"})]),n("div",D,I(l(r).appInfo.title),1)]),n("div",E,[t[1]||(t[1]=a(" 还没有账号? ",-1)),i(s,{to:"/signup",class:"text-primary font-medium"},{default:e(()=>[...t[0]||(t[0]=[a("注册",-1)])]),_:1})])]),"password-hint":e(()=>[i(s,{to:"/",class:"text-primary font-medium",tabindex:"-1"},{default:e(()=>[...t[2]||(t[2]=[a("忘记密码?",-1)])]),_:1})]),footer:e(()=>[t[4]||(t[4]=a(" 点击登陆，即表示您同意我们的 ",-1)),i(s,{to:"/",class:"text-primary font-medium"},{default:e(()=>[...t[3]||(t[3]=[a("服务条款",-1)])]),_:1})]),_:1},8,["schema","title"])}}});export{X as default};
