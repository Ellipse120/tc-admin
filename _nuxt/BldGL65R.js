import{h as u}from"./XtscgSls.js";import{G as l,E as r,b9 as h,c3 as O,as as _,c4 as k,u as U}from"./C5HeKxGp.js";function x(n,e,a){const[t={},o]=typeof e=="string"?[{},e]:[e,a],s=l(()=>r(n)),c=l(()=>r(t.key)||"$f"+u([o,typeof s.value=="string"?s.value:"",...E(t)]));if(!t.baseURL&&typeof s.value=="string"&&s.value[0]==="/"&&s.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:p,lazy:y,default:d,transform:m,pick:b,watch:f,immediate:v,getCachedData:w,deep:g,dedupe:$,timeout:j,...A}=t,i=h({...O,...A,cache:typeof t.cache=="boolean"?void 0:t.cache}),D={server:p,lazy:y,default:d,transform:m,pick:b,immediate:v,getCachedData:w,deep:g,dedupe:$,timeout:j,watch:f===!1?[]:[...f||[],i]};return _(f===!1?c.value:c,(q,{signal:F})=>(t.$fetch||globalThis.$fetch)(s.value,{signal:F,...i}),D)}function E(n){const e=[r(n.method)?.toUpperCase()||"GET",r(n.baseURL)];for(const a of[n.params||n.query]){const t=r(a);if(!t)continue;const o={};for(const[s,c]of Object.entries(t))o[r(s)]=r(c);e.push(o)}if(n.body){const a=r(n.body);if(!a)e.push(u(a));else if(a instanceof ArrayBuffer)e.push(u(Object.fromEntries([...new Uint8Array(a).entries()].map(([t,o])=>[t,o.toString()]))));else if(a instanceof FormData){const t={};for(const o of a.entries()){const[s,c]=o;t[s]=c instanceof File?c.name:c}e.push(u(t))}else if(k(a))e.push(u(h(a)));else try{e.push(u(a))}catch{console.warn("[useFetch] Failed to hash body",a)}}return e}function T(n,e,a="value",t="label"){if(["",void 0,"undefined",null,"null"].includes(e)||n===null||!Array.isArray(n))return"";const o=n.find(s=>s[a]===e);return o?o[t]:e}function C(n,e){return x(n,{...e,$fetch:U().$api},"$Gt4jHrdoGo")}export{T as f,C as u};
