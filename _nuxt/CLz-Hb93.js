import{y as b,aw as g,aF as h,x as w,u as y,z as k,w as e,C as l,d as v,Z as s,f as a,a0 as C,g as i,a3 as N,t as $,aG as A,aH as I}from"#entry";import{_ as S}from"./CkY-M4CP.js";import{o as T,s as c,u as U,e as j}from"./CgWs44Z7.js";import"./Bp66dSl9.js";import"./1ocaQ9N1.js";import"./Dv7nMYhk.js";import"./CSB81tCK.js";import"./CM1iG8p5.js";import"./fYI7PWhB.js";import"./DbUkKKCk.js";import"./BH7seRj-.js";import"./DZYh46tY.js";const B={class:"flex items-center flex-col gap-4 justify-center"},V={class:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center"},q={class:"text-2xl font-bold text-center"},F={class:"pt-2"},R=b({__name:"login",setup(z){g({title:"登录",description:"登录后继续"});const p=h(),n=w(),d=[{name:"email",type:"text",label:"用户名或者电子邮箱",placeholder:"请输入您的用户名或者电子邮箱",required:!0},{name:"password",label:"密码",type:"password",placeholder:"请输入您的密码",required:!0},{name:"remember",label:"记住我",type:"checkbox"}],u=T({email:U([j("无效电子邮箱"),c("不能为空").min(1)]),password:c().min(6,"至少6个字符")}),{$api:f}=y();async function _(r){const t=await f("/Account/login",{method:"POST",body:{...r.data,username:r.data.email}}).catch(o=>{p.add({title:"登录失败",description:o?.data?.message||"请稍后再试",color:"error"})});if(t?.token){A(t),p.add({title:"登录成功",description:`欢迎回来！${t.user.userName}`,color:"success"});const o=t.user.role!==n.appInfo.roleEnum.student?"/teacher":"/student";return I(o)}}return(r,t)=>{const o=N,m=C,x=S;return v(),k(x,{fields:d,schema:l(u),title:l(n).appInfo.title,submit:{label:"登录",block:!0},icon:"i-lucide-book-open-text",onSubmit:_},{header:e(()=>[i("div",B,[i("div",V,[a(o,{name:"i-lucide-book-open-text",class:"w-8 h-8 text-white"})]),i("div",q,$(l(n).appInfo.title),1)]),i("div",F,[t[1]||(t[1]=s(" 还没有账号? ",-1)),a(m,{to:"/signup",class:"text-primary font-medium"},{default:e(()=>[...t[0]||(t[0]=[s("注册",-1)])]),_:1})])]),"password-hint":e(()=>[a(m,{to:"/",class:"text-primary font-medium",tabindex:"-1"},{default:e(()=>[...t[2]||(t[2]=[s("忘记密码?",-1)])]),_:1})]),footer:e(()=>[t[4]||(t[4]=s(" 点击登陆，即表示您同意我们的 ",-1)),a(m,{to:"/",class:"text-primary font-medium"},{default:e(()=>[...t[3]||(t[3]=[s("服务条款",-1)])]),_:1})]),_:1},8,["schema","title"])}}});export{R as default};
