import{y as b,au as h,aD as g,x as k,u as y,z as w,w as t,C as l,d as C,a2 as a,f as i,W as v,g as n,Z as I,t as N,h as $,aE as A,aF as S}from"./CweTmiC-.js";import{_ as T}from"./v-FOSCoz.js";import{u as U}from"./RQh4GW1b.js";import{o as j,s as p,u as B,e as V}from"./BozpK2cH.js";import"./DsHyAa-R.js";import"./BCD-wE1Z.js";import"./CTdaLBxy.js";import"./BHTyEbSF.js";import"./DAq5XF_o.js";import"./DARA5qON.js";import"./CumRcfy5.js";import"./D-JfCthy.js";import"./CNdl3Wjl.js";const q={class:"flex items-center flex-col gap-4 justify-center"},D={class:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center"},E={class:"text-2xl font-bold text-center"},F={class:"pt-2"},Y=b({__name:"login",setup(z){h({title:"登录",description:"登录后继续"});const c=g(),r=k(),u=[{name:"email",type:"text",label:"用户名或者电子邮箱",placeholder:"请输入您的用户名或者电子邮箱",required:!0},{name:"password",label:"密码",type:"password",placeholder:"请输入您的密码",required:!0},{name:"remember",label:"记住我",type:"checkbox"}],d=j({email:B([V("无效电子邮箱"),p("不能为空").min(1)]),password:p().min(6,"至少6个字符")}),{$api:f}=y();async function _(m){const e=await f("/Account/login",{method:"POST",body:{...m.data,username:m.data.email}}).catch(o=>{c.add({title:"登录失败",description:o?.data?.message||"请稍后再试",color:"error"})});if(e?.token){const o=$("userInfo");o.value=e,A("userInfo"),U(e),c.add({title:"登录成功",description:`欢迎回来！${e.user.userName}`,color:"success"});const s=e.user.role!==r.appInfo.roleEnum.student?"/teacher":"/student";return S(s)}}return(m,e)=>{const o=I,s=v,x=T;return C(),w(x,{fields:u,schema:l(d),title:l(r).appInfo.title,submit:{label:"登录",block:!0},icon:"i-lucide-book-open-text",onSubmit:_},{header:t(()=>[n("div",q,[n("div",D,[i(o,{name:"i-lucide-book-open-text",class:"w-8 h-8 text-white"})]),n("div",E,N(l(r).appInfo.title),1)]),n("div",F,[e[1]||(e[1]=a(" 还没有账号? ",-1)),i(s,{to:"/signup",class:"text-primary font-medium"},{default:t(()=>[...e[0]||(e[0]=[a("注册",-1)])]),_:1})])]),"password-hint":t(()=>[i(s,{to:"/",class:"text-primary font-medium",tabindex:"-1"},{default:t(()=>[...e[2]||(e[2]=[a("忘记密码?",-1)])]),_:1})]),footer:t(()=>[e[4]||(e[4]=a(" 点击登陆，即表示您同意我们的 ",-1)),i(s,{to:"/",class:"text-primary font-medium"},{default:t(()=>[...e[3]||(e[3]=[a("服务条款",-1)])]),_:1})]),_:1},8,["schema","title"])}}});export{Y as default};
