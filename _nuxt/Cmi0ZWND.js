import{y as b,ar as g,aA as h,x as y,u as k,z as w,w as e,C as l,d as C,Z as a,f as i,a0 as v,g as n,a3 as N,t as A,h as I,aB as S,aC as $}from"#entry";import{_ as B}from"./B746vBZm.js";import{o as T,s as p,u as U,e as j}from"./CgWs44Z7.js";import"./CHL9FEqX.js";import"./bUmFF9bK.js";import"./BvyGPKMy.js";import"./kJjS-Msc.js";import"./B7kJiFyT.js";import"./BNOzPypE.js";import"./Ctnr71Mi.js";import"./8cZyX_Qo.js";import"./d2nnjJfY.js";const V={class:"flex items-center flex-col gap-4 justify-center"},q={class:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center"},O={class:"text-2xl font-bold text-center"},z={class:"pt-2"},W=b({__name:"login",setup(D){g({title:"登录",description:"登录后继续"});const c=h(),r=y(),d=[{name:"email",type:"text",label:"用户名或者电子邮箱",placeholder:"请输入您的用户名或者电子邮箱",required:!0},{name:"password",label:"密码",type:"password",placeholder:"请输入您的密码",required:!0},{name:"remember",label:"记住我",type:"checkbox"}],u=T({email:U([j("无效电子邮箱"),p("不能为空").min(1)]),password:p().min(6,"至少6个字符")}),{$api:f}=k();async function _(m){const t=await f("/Account/login",{method:"POST",body:{...m.data,username:m.data.email}}).catch(o=>{c.add({title:"登录失败",description:o?.data?.message||"请稍后再试",color:"error"})});if(t?.token){const o=I("userInfo");o.value&&=JSON.stringify(t),S(t),c.add({title:"登录成功",description:`欢迎回来！${t.user.userName}`,color:"success"});const s=t.user.role!==r.appInfo.roleEnum.student?"/teacher":"/student";return $(s)}}return(m,t)=>{const o=N,s=v,x=B;return C(),w(x,{fields:d,schema:l(u),title:l(r).appInfo.title,submit:{label:"登录",block:!0},icon:"i-lucide-book-open-text",onSubmit:_},{header:e(()=>[n("div",V,[n("div",q,[i(o,{name:"i-lucide-book-open-text",class:"w-8 h-8 text-white"})]),n("div",O,A(l(r).appInfo.title),1)]),n("div",z,[t[1]||(t[1]=a(" 还没有账号? ",-1)),i(s,{to:"/signup",class:"text-primary font-medium"},{default:e(()=>[...t[0]||(t[0]=[a("注册",-1)])]),_:1})])]),"password-hint":e(()=>[i(s,{to:"/",class:"text-primary font-medium",tabindex:"-1"},{default:e(()=>[...t[2]||(t[2]=[a("忘记密码?",-1)])]),_:1})]),footer:e(()=>[t[4]||(t[4]=a(" 点击登陆，即表示您同意我们的 ",-1)),i(s,{to:"/",class:"text-primary font-medium"},{default:e(()=>[...t[3]||(t[3]=[a("服务条款",-1)])]),_:1})]),_:1},8,["schema","title"])}}});export{W as default};
