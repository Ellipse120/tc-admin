import{bf as _e,y as q,aK as z,aM as Ce,bg as Z,aL as oe,aN as Ee,r as E,aO as le,D as xe,aR as R,aP as X,z as F,d as w,w as x,A as K,e as se,C as t,P as I,bh as Fe,f as ne,U as V,aZ as M,G as D,bi as we,o as Le,b as Ae,aX as re,B as J,aI as ue,bj as qe,bk as Ke}from"#entry";import{f as Ie}from"./BH7seRj-.js";import{u as ke}from"./Dv7nMYhk.js";import{u as Se}from"./DZYh46tY.js";import{g as Be}from"./CM1iG8p5.js";import{V as Re}from"./fYI7PWhB.js";function Te(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function Ve(n,r,a){return n===void 0?!1:Array.isArray(n)?n.some(l=>T(l,r,a)):T(n,r,a)}function T(n,r,a){return n===void 0||r===void 0?!1:typeof n=="string"?n===r:typeof a=="function"?a(n,r):typeof a=="string"?n?.[a]===r?.[a]:_e(n,r)}const[Q,Pe]=z("ListboxRoot");var He=q({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:r,emit:a}){const l=n,f=a,{multiple:s,highlightOnHover:h,orientation:g,disabled:u,selectionBehavior:_,dir:y}=Ce(l),{getItems:m}=Z({isProvider:!0}),{handleTypeaheadSearch:k}=Se(),{primitiveElement:P,currentElement:c}=oe(),C=Te(),H=Ee(y),de=ke(c),O=E(),S=E(!1),N=E(!0),v=le(l,"modelValue",f,{defaultValue:l.defaultValue??(s.value?[]:void 0),passive:l.modelValue===void 0,deep:!0});function fe(e){if(S.value=!0,l.multiple){const i=Array.isArray(v.value)?[...v.value]:[],o=i.findIndex(d=>T(d,e,l.by));l.selectionBehavior==="toggle"?(o===-1?i.push(e):i.splice(o,1),v.value=i):(v.value=[e],O.value=e)}else l.selectionBehavior==="toggle"&&T(v.value,e,l.by)?v.value=void 0:v.value=e;setTimeout(()=>{S.value=!1},1)}const p=E(null),G=E(null),L=E(!1),U=E(!1),Y=X(),$=X(),ee=X();function W(){return m().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function b(e,i=!0){if(!e)return;p.value=e,N.value&&p.value.focus(),i&&p.value.scrollIntoView({block:"nearest"});const o=m().find(d=>d.ref===e);f("highlight",o)}function ce(e){if(L.value)ee.trigger(e);else{const i=m().find(o=>T(o.value,e,l.by));i&&(p.value=i.ref,b(i.ref))}}function ve(e){p.value&&p.value.isConnected&&(e.preventDefault(),e.stopPropagation(),U.value||p.value.click())}function pe(e){if(N.value){if(S.value=!0,L.value)$.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&s.value){const o=m(),d=o.map(A=>A.value);v.value=[...d],e.preventDefault(),b(o[o.length-1].ref)}else if(!i){const o=k(e.key,m());o&&b(o)}}setTimeout(()=>{S.value=!1},1)}}function me(){U.value=!0}function he(){R(()=>{U.value=!1})}function te(){R(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ae(e)})}function j(e){const i=p.value;i?.isConnected&&(G.value=i),p.value=null,f("leave",e)}function ge(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),f("entryFocus",i),!i.defaultPrevented)if(G.value)b(G.value);else{const o=W()?.[0];b(o)}}function ae(e){const i=Be(e,g.value,H.value);if(!i)return;let o=W();if(p.value){if(i==="last")o.reverse();else if(i==="prev"||i==="next"){i==="prev"&&o.reverse();const d=o.indexOf(p.value);o=o.slice(d+1)}ye(e,o[0])}if(o.length){const d=!p.value&&i==="prev"?o.length-1:0;b(o[d])}if(L.value)return $.trigger(e)}function ye(e,i){if(!(L.value||l.selectionBehavior!=="replace"||!s.value||!Array.isArray(v.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const d=m().filter(B=>B.ref.dataset.disabled!=="");let A=d.find(B=>B.ref===i)?.value;if(e.key===C.END?A=d[d.length-1].value:e.key===C.HOME&&(A=d[0].value),!A||!O.value)return;const be=Ie(d.map(B=>B.value),O.value,A);v.value=be}}async function ie(e){if(await R(),L.value)Y.trigger(e);else{const i=W(),o=i.find(d=>d.dataset.state==="checked");o?b(o):i.length&&b(i[0])}}return xe(v,()=>{S.value||R(()=>{ie()})},{immediate:!0,deep:!0}),r({highlightedElement:p,highlightItem:ce,highlightFirstItem:te,highlightSelected:ie,getItems:m}),Pe({modelValue:v,onValueChange:fe,multiple:s,orientation:g,dir:H,disabled:u,highlightOnHover:h,highlightedElement:p,isVirtual:L,virtualFocusHook:Y,virtualKeydownHook:$,virtualHighlightHook:ee,by:l.by,firstValue:O,selectionBehavior:_,focusable:N,onLeave:j,onEnter:ge,changeHighlight:b,onKeydownEnter:ve,onKeydownNavigation:ae,onKeydownTypeAhead:pe,onCompositionStart:me,onCompositionEnd:he,highlightFirstItem:te}),(e,i)=>(w(),F(t(I),{ref_key:"primitiveElement",ref:P,as:e.as,"as-child":e.asChild,dir:t(H),"data-disabled":t(u)?"":void 0,onPointerleave:j,onFocusout:i[0]||(i[0]=async o=>{const d=o.relatedTarget||o.target;await R(),p.value&&t(c)&&!t(c).contains(d)&&j(o)})},{default:x(()=>[K(e.$slots,"default",{modelValue:t(v)}),t(de)&&e.name?(w(),F(t(Re),{key:0,name:e.name,value:t(v),disabled:t(u),required:e.required},null,8,["name","value","disabled","required"])):se("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),et=He,Oe=q({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:r}=Z(),a=Q(),l=Fe(!1,10);return(f,s)=>(w(),F(t(r),null,{default:x(()=>[ne(t(I),{role:"listbox",as:f.as,"as-child":f.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:s[0]||(s[0]=M(h=>l.value=!0,["left"])),onFocus:s[1]||(s[1]=h=>{t(l)||t(a).onEnter(h)}),onKeydown:[s[2]||(s[2]=V(M(h=>{t(a).focusable.value&&t(a).onKeydownNavigation(h)},["prevent"]),["down","up","left","right","home","end"])),V(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:x(()=>[K(f.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),tt=Oe,De=q({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:r}){const a=n,f=le(a,"modelValue",r,{defaultValue:"",passive:a.modelValue===void 0}),s=Q(),{primitiveElement:h,currentElement:g}=oe(),u=D(()=>a.disabled||s.disabled.value||!1),_=E();return we(()=>_.value=s.highlightedElement.value?.id),Le(()=>{s.focusable.value=!1,setTimeout(()=>{a.autoFocus&&g.value?.focus()},1)}),Ae(()=>{s.focusable.value=!0}),(y,m)=>(w(),F(t(I),{ref_key:"primitiveElement",ref:h,as:y.as,"as-child":y.asChild,value:t(f),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":_.value,type:"text",onKeydown:[V(M(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),V(t(s).onKeydownEnter,["enter"])],onInput:m[0]||(m[0]=k=>{f.value=k.target.value,t(s).highlightFirstItem()}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:x(()=>[K(y.$slots,"default",{modelValue:t(f)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),at=De;const[it,Me]=z("ListboxGroup");var Ne=q({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const r=n,a=re(void 0,"reka-listbox-group");return Me({id:a}),(l,f)=>(w(),F(t(I),J({role:"group"},r,{"aria-labelledby":t(a)}),{default:x(()=>[K(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),ot=Ne;const Ge="listbox.select",[Ue,$e]=z("ListboxItem");var We=q({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:r}){const a=n,l=r,f=re(void 0,"reka-listbox-item"),{CollectionItem:s}=Z(),{forwardRef:h,currentElement:g}=ue(),u=Q(),_=D(()=>g.value===u.highlightedElement.value),y=D(()=>Ve(u.modelValue.value,a.value,u.by)),m=D(()=>u.disabled.value||a.disabled);async function k(c){l("select",c),!c?.defaultPrevented&&!m.value&&c&&(u.onValueChange(a.value),u.changeHighlight(g.value))}function P(c){const C={originalEvent:c,value:a.value};Ke(Ge,k,C)}return $e({isSelected:y}),(c,C)=>(w(),F(t(s),{value:c.value},{default:x(()=>[qe([_.value,y.value],()=>ne(t(I),J({id:t(f)},c.$attrs,{ref:t(h),role:"option",tabindex:t(u).focusable.value?_.value?"0":"-1":-1,"aria-selected":y.value,as:c.as,"as-child":c.asChild,disabled:m.value?"":void 0,"data-disabled":m.value?"":void 0,"data-highlighted":_.value?"":void 0,"data-state":y.value?"checked":"unchecked",onClick:P,onKeydown:V(M(P,["prevent"]),["space"]),onPointermove:C[0]||(C[0]=H=>{t(u).highlightedElement.value!==t(g)&&(t(u).highlightOnHover.value?t(u).changeHighlight(t(g),!1):t(u).focusable.value||t(u).changeHighlight(t(g),!1))})}),{default:x(()=>[K(c.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),C,1)]),_:3},8,["value"]))}}),lt=We,je=q({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const r=n;ue();const a=Ue();return(l,f)=>t(a).isSelected.value?(w(),F(t(I),J({key:0,"aria-hidden":"true"},r),{default:x(()=>[K(l.$slots,"default")]),_:3},16)):se("v-if",!0)}}),st=je;export{at as L,tt as a,ot as b,lt as c,st as d,et as e,Q as f,it as i};
