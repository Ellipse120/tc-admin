import{bc as ke,y as B,aH as Q,aJ as Ae,bd as $,aI as ue,aK as we,r as L,aL as de,D as Le,aP as M,aN as J,z as q,d as k,w as S,A as R,e as ce,C as a,P as N,be as fe,f as pe,a6 as O,aX as Z,G as T,bf as Ie,o as qe,b as Se,aV as ve,B as ee,aF as me,bg as Ve,bh as Ke,I as Te,bi as Be,F as ne,bj as He,a_ as Pe,c as se,a3 as Re,am as Ne,bk as De}from"#entry";import{f as z}from"./DivUpmYq.js";import{u as Me,g as Oe}from"./BOGYLXwb.js";import{g as ze,M as $e}from"./By4ZTqVd.js";import{u as Ge}from"./B68Y4G0P.js";import{V as Ue}from"./toFnr21D.js";import{u as We}from"./FFK1d6Mv.js";function je(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function re(d){return d?.querySelector("[data-state=checked]")}function Xe(d,o,i){return d===void 0?!1:Array.isArray(d)?d.some(t=>I(t,o,i)):I(d,o,i)}function I(d,o,i){return d===void 0||o===void 0?!1:typeof d=="string"?d===o:typeof i=="function"?i(d,o):typeof i=="string"?d?.[i]===o?.[i]:ke(d,o)}const[G,Ye]=Q("ListboxRoot");var Je=B({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(d,{expose:o,emit:i}){const t=d,f=i,{multiple:c,highlightOnHover:g,orientation:y,disabled:v,selectionBehavior:E,dir:x}=Ae(t),{getItems:b}=$({isProvider:!0}),{handleTypeaheadSearch:l}=Me(),{primitiveElement:u,currentElement:s}=ue(),m=je(),C=we(x),F=Ge(s),A=L(),V=L(!1),K=L(!0),p=de(t,"modelValue",f,{defaultValue:t.defaultValue??(c.value?[]:void 0),passive:t.modelValue===void 0,deep:!0});function he(e){if(V.value=!0,t.multiple){const n=Array.isArray(p.value)?[...p.value]:[],r=n.findIndex(h=>I(h,e,t.by));t.selectionBehavior==="toggle"?(r===-1?n.push(e):n.splice(r,1),p.value=n):(p.value=[e],A.value=e)}else t.selectionBehavior==="toggle"&&I(p.value,e,t.by)?p.value=void 0:p.value=e;setTimeout(()=>{V.value=!1},1)}const _=L(null),U=L(null),H=L(!1),W=L(!1),te=J(),j=J(),ae=J();function X(){return b().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function w(e,n=!0){if(!e)return;_.value=e,K.value&&_.value.focus(),n&&_.value.scrollIntoView({block:"nearest"});const r=b().find(h=>h.ref===e);f("highlight",r)}function ge(e){if(H.value)ae.trigger(e);else{const n=b().find(r=>I(r.value,e,t.by));n&&(_.value=n.ref,w(n.ref))}}function ye(e){_.value&&_.value.isConnected&&(e.preventDefault(),e.stopPropagation(),W.value||_.value.click())}function be(e){if(K.value){if(V.value=!0,H.value)j.trigger(e);else{const n=e.altKey||e.ctrlKey||e.metaKey;if(n&&e.key==="a"&&c.value){const r=b(),h=r.map(P=>P.value);p.value=[...h],e.preventDefault(),w(r[r.length-1].ref)}else if(!n){const r=l(e.key,b());r&&w(r)}}setTimeout(()=>{V.value=!1},1)}}function _e(){W.value=!0}function xe(){M(()=>{W.value=!1})}function ie(){M(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});oe(e)})}function Y(e){const n=_.value;n?.isConnected&&(U.value=n),_.value=null,f("leave",e)}function Ce(e){const n=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(n),f("entryFocus",n),!n.defaultPrevented)if(U.value)w(U.value);else{const r=X()?.[0];w(r)}}function oe(e){const n=ze(e,y.value,C.value);if(!n)return;let r=X();if(_.value){if(n==="last")r.reverse();else if(n==="prev"||n==="next"){n==="prev"&&r.reverse();const h=r.indexOf(_.value);r=r.slice(h+1)}Ee(e,r[0])}if(r.length){const h=!_.value&&n==="prev"?r.length-1:0;w(r[h])}if(H.value)return j.trigger(e)}function Ee(e,n){if(!(H.value||t.selectionBehavior!=="replace"||!c.value||!Array.isArray(p.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const h=b().filter(D=>D.ref.dataset.disabled!=="");let P=h.find(D=>D.ref===n)?.value;if(e.key===m.END?P=h[h.length-1].value:e.key===m.HOME&&(P=h[0].value),!P||!A.value)return;const Fe=z(h.map(D=>D.value),A.value,P);p.value=Fe}}async function le(e){if(await M(),H.value)te.trigger(e);else{const n=X(),r=n.find(h=>h.dataset.state==="checked");r?w(r):n.length&&w(n[0])}}return Le(p,()=>{V.value||M(()=>{le()})},{immediate:!0,deep:!0}),o({highlightedElement:_,highlightItem:ge,highlightFirstItem:ie,highlightSelected:le,getItems:b}),Ye({modelValue:p,onValueChange:he,multiple:c,orientation:y,dir:C,disabled:v,highlightOnHover:g,highlightedElement:_,isVirtual:H,virtualFocusHook:te,virtualKeydownHook:j,virtualHighlightHook:ae,by:t.by,firstValue:A,selectionBehavior:E,focusable:K,onLeave:Y,onEnter:Ce,changeHighlight:w,onKeydownEnter:ye,onKeydownNavigation:oe,onKeydownTypeAhead:be,onCompositionStart:_e,onCompositionEnd:xe,highlightFirstItem:ie}),(e,n)=>(k(),q(a(N),{ref_key:"primitiveElement",ref:u,as:e.as,"as-child":e.asChild,dir:a(C),"data-disabled":a(v)?"":void 0,onPointerleave:Y,onFocusout:n[0]||(n[0]=async r=>{const h=r.relatedTarget||r.target;await M(),_.value&&a(s)&&!a(s).contains(h)&&Y(r)})},{default:S(()=>[R(e.$slots,"default",{modelValue:a(p)}),a(F)&&e.name?(k(),q(a(Ue),{key:0,name:e.name,value:a(p),disabled:a(v),required:e.required},null,8,["name","value","disabled","required"])):ce("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),mt=Je,Qe=B({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(d){const{CollectionSlot:o}=$(),i=G(),t=fe(!1,10);return(f,c)=>(k(),q(a(o),null,{default:S(()=>[pe(a(N),{role:"listbox",as:f.as,"as-child":f.asChild,tabindex:a(i).focusable.value?a(i).highlightedElement.value?"-1":"0":"-1","aria-orientation":a(i).orientation.value,"aria-multiselectable":!!a(i).multiple.value,"data-orientation":a(i).orientation.value,onMousedown:c[0]||(c[0]=Z(g=>t.value=!0,["left"])),onFocus:c[1]||(c[1]=g=>{a(t)||a(i).onEnter(g)}),onKeydown:[c[2]||(c[2]=O(g=>{a(i).orientation.value==="vertical"&&(g.key==="ArrowLeft"||g.key==="ArrowRight")||a(i).orientation.value==="horizontal"&&(g.key==="ArrowUp"||g.key==="ArrowDown")||(g.preventDefault(),a(i).focusable.value&&a(i).onKeydownNavigation(g))},["down","up","left","right","home","end"])),O(a(i).onKeydownEnter,["enter"]),a(i).onKeydownTypeAhead]},{default:S(()=>[R(f.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),ht=Qe,Ze=B({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(d,{emit:o}){const i=d,f=de(i,"modelValue",o,{defaultValue:"",passive:i.modelValue===void 0}),c=G(),{primitiveElement:g,currentElement:y}=ue(),v=T(()=>i.disabled||c.disabled.value||!1),E=L();return Ie(()=>E.value=c.highlightedElement.value?.id),qe(()=>{c.focusable.value=!1,setTimeout(()=>{i.autoFocus&&y.value?.focus()},1)}),Se(()=>{c.focusable.value=!0}),(x,b)=>(k(),q(a(N),{ref_key:"primitiveElement",ref:g,as:x.as,"as-child":x.asChild,value:a(f),disabled:v.value?"":void 0,"data-disabled":v.value?"":void 0,"aria-disabled":v.value??void 0,"aria-activedescendant":E.value,type:"text",onKeydown:[O(Z(a(c).onKeydownNavigation,["prevent"]),["down","up","home","end"]),O(a(c).onKeydownEnter,["enter"])],onInput:b[0]||(b[0]=l=>{f.value=l.target.value,a(c).highlightFirstItem()}),onCompositionstart:a(c).onCompositionStart,onCompositionend:a(c).onCompositionEnd},{default:S(()=>[R(x.$slots,"default",{modelValue:a(f)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),gt=Ze;const[yt,et]=Q("ListboxGroup");var tt=B({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(d){const o=d,i=ve(void 0,"reka-listbox-group");return et({id:i}),(t,f)=>(k(),q(a(N),ee({role:"group"},o,{"aria-labelledby":a(i)}),{default:S(()=>[R(t.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),bt=tt;const at="listbox.select",[it,ot]=Q("ListboxItem");var lt=B({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(d,{emit:o}){const i=d,t=o,f=ve(void 0,"reka-listbox-item"),{CollectionItem:c}=$(),{forwardRef:g,currentElement:y}=me(),v=G(),E=T(()=>y.value===v.highlightedElement.value),x=T(()=>Xe(v.modelValue.value,i.value,v.by)),b=T(()=>v.disabled.value||i.disabled);async function l(s){t("select",s),!s?.defaultPrevented&&!b.value&&s&&(v.onValueChange(i.value),v.changeHighlight(y.value))}function u(s){const m={originalEvent:s,value:i.value};Ke(at,l,m)}return ot({isSelected:x}),(s,m)=>(k(),q(a(c),{value:s.value},{default:S(()=>[Ve([E.value,x.value],()=>pe(a(N),ee({id:a(f)},s.$attrs,{ref:a(g),role:"option",tabindex:a(v).focusable.value?E.value?"0":"-1":-1,"aria-selected":x.value,as:s.as,"as-child":s.asChild,disabled:b.value?"":void 0,"data-disabled":b.value?"":void 0,"data-highlighted":E.value?"":void 0,"data-state":x.value?"checked":"unchecked",onClick:u,onKeydown:O(Z(u,["prevent"]),["space"]),onPointermove:m[0]||(m[0]=()=>{a(v).highlightedElement.value!==a(y)&&a(v).highlightOnHover.value&&!a(v).focusable.value&&a(v).changeHighlight(a(y),!1)})}),{default:S(()=>[R(s.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),m,1)]),_:3},8,["value"]))}}),_t=lt,nt=B({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(d){const o=d;me();const i=it();return(t,f)=>a(i).isSelected.value?(k(),q(a(N),ee({key:0,"aria-hidden":"true"},o),{default:S(()=>[R(t.$slots,"default")]),_:3},16)):ce("v-if",!0)}}),xt=nt,st=B({__name:"ListboxVirtualizer",props:{options:{type:Array,required:!0},overscan:{type:Number,required:!1},estimateSize:{type:Number,required:!1},textContent:{type:Function,required:!1}},setup(d){const o=d,i=Te(),t=G(),f=Be(),{getItems:c}=$();t.isVirtual.value=!0;const g=T(()=>{const l=f.value;if(l){const u=window.getComputedStyle(l);return{start:Number.parseFloat(u.paddingBlockStart||u.paddingTop),end:Number.parseFloat(u.paddingBlockEnd||u.paddingBottom)}}else return{start:0,end:0}}),y=We({get scrollPaddingStart(){return g.value.start},get scrollPaddingEnd(){return g.value.end},get count(){return o.options.length},get horizontal(){return t.orientation.value==="horizontal"},estimateSize(){return o.estimateSize??28},getScrollElement(){return f.value},overscan:o.overscan??12}),v=T(()=>y.value.getVirtualItems().map(l=>{const u=i.default({option:o.options[l.index],virtualizer:y.value,virtualItem:l})[0],s=u.type===ne&&Array.isArray(u.children)?u.children[0]:u;return{item:l,is:He(s,{key:`${l.key}`,"data-index":l.index,"aria-setsize":o.options.length,"aria-posinset":l.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`,overflowAnchor:"none"}})}}));t.virtualFocusHook.on(l=>{const u=o.options.findIndex(s=>Array.isArray(t.modelValue.value)?I(s,t.modelValue.value[0],t.by):I(s,t.modelValue.value,t.by));u!==-1?(l?.preventDefault(),y.value.scrollToIndex(u,{align:"start"}),requestAnimationFrame(()=>{const s=re(f.value);s&&(t.changeHighlight(s),l&&s?.focus())})):t.highlightFirstItem()}),t.virtualHighlightHook.on(l=>{const u=o.options.findIndex(s=>I(s,l,t.by));y.value.scrollToIndex(u,{align:"start"}),requestAnimationFrame(()=>{const s=re(f.value);s&&t.changeHighlight(s)})});const E=fe("",1e3),x=T(()=>{const l=u=>o.textContent?o.textContent(u):u?.toString().toLowerCase();return o.options.map((u,s)=>({index:s,textContent:l(u)}))});function b(l,u){if(!t.firstValue?.value||!t.multiple.value||!Array.isArray(t.modelValue.value))return;const m=c().filter(F=>F.ref.dataset.disabled!=="").find(F=>F.ref===t.highlightedElement.value)?.value;if(!m)return;let C=null;switch(u){case"prev":case"next":{C=z(o.options,t.firstValue.value,m);break}case"first":{C=z(o.options,t.firstValue.value,o.options?.[0]);break}case"last":{C=z(o.options,t.firstValue.value,o.options?.[o.options.length-1]);break}}t.modelValue.value=C}return t.virtualKeydownHook.on(l=>{const u=l.altKey||l.ctrlKey||l.metaKey;if(l.key==="Tab"&&!u)return;let m=$e[l.key];if(u&&l.key==="a"&&t.multiple.value?(l.preventDefault(),t.modelValue.value=[...o.options],m="last"):l.shiftKey&&m&&b(l,m),["first","last"].includes(m)){l.preventDefault();const C=m==="first"?0:o.options.length-1;y.value.scrollToIndex(C),requestAnimationFrame(()=>{const F=c(),A=m==="first"?F[0]:F[F.length-1];A&&t.changeHighlight(A.ref)})}else if(!m&&!u){E.value+=l.key;const C=Number(Pe()?.getAttribute("data-index")),F=x.value[C].textContent,A=x.value.map(p=>p.textContent??""),V=Oe(A,E.value,F),K=x.value.find(p=>p.textContent===V);K&&(y.value.scrollToIndex(K.index,{align:"start"}),requestAnimationFrame(()=>{const p=f.value.querySelector(`[data-index="${K.index}"]`);p instanceof HTMLElement&&t.changeHighlight(p)}))}}),(l,u)=>(k(),se("div",{"data-reka-virtualizer":"",style:De({position:"relative",width:"100%",height:`${a(y).getTotalSize()}px`})},[(k(!0),se(ne,null,Re(v.value,({is:s,item:m})=>(k(),q(Ne(s),{key:m.index}))),128))],4))}}),Ct=st;export{_t as L,xt as a,gt as b,ht as c,Ct as d,bt as e,mt as f,G as g,yt as i};
