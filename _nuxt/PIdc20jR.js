import{h as c}from"./D4uEUL1y.js";import{G as d,E as r,b9 as b,bI as F,ap as q,bJ as x,u as T}from"#entry";function _(n,t,o){const[e={},s]=typeof t=="string"?[{},t]:[t,o],a=d(()=>r(n)),u=d(()=>r(e.key)||"$f"+c([s,typeof a.value=="string"?a.value:"",...k(e)]));if(!e.baseURL&&typeof a.value=="string"&&a.value[0]==="/"&&a.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:y,default:v,transform:w,pick:g,watch:f,immediate:A,getCachedData:D,deep:O,dedupe:E,...$}=e,h=b({...F,...$,cache:typeof e.cache=="boolean"?void 0:e.cache}),j={server:m,lazy:y,default:v,transform:w,pick:g,immediate:A,getCachedData:D,deep:O,dedupe:E,watch:f===!1?[]:[...f||[],h]};let i;return q(f===!1?u.value:u,()=>{i?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),i=typeof AbortController<"u"?new AbortController:{};const p=r(e.timeout);let l;return p&&(l=setTimeout(()=>i.abort(new DOMException("Request aborted due to timeout.","AbortError")),p),i.signal.onabort=()=>clearTimeout(l)),(e.$fetch||globalThis.$fetch)(a.value,{signal:i.signal,...h}).finally(()=>{clearTimeout(l)})},j)}function k(n){const t=[r(n.method)?.toUpperCase()||"GET",r(n.baseURL)];for(const o of[n.params||n.query]){const e=r(o);if(!e)continue;const s={};for(const[a,u]of Object.entries(e))s[r(a)]=r(u);t.push(s)}if(n.body){const o=r(n.body);if(!o)t.push(c(o));else if(o instanceof ArrayBuffer)t.push(c(Object.fromEntries([...new Uint8Array(o).entries()].map(([e,s])=>[e,s.toString()]))));else if(o instanceof FormData){const e={};for(const s of o.entries()){const[a,u]=s;e[a]=u instanceof File?u.name:u}t.push(c(e))}else if(x(o))t.push(c(b(o)));else try{t.push(c(o))}catch{console.warn("[useFetch] Failed to hash body",o)}}return t}function L(n,t,o="value",e="label"){if(["",void 0,"undefined",null,"null"].includes(t)||n===null||!Array.isArray(n))return"";const s=n.find(a=>a[o]===t);return s?s[e]:t}function I(n,t){return _(n,{...t,$fetch:T().$api},"$Gt4jHrdoGo")}export{L as f,I as u};
