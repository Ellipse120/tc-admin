import{h as c}from"./4YrBz0CJ.js";import{G as p,E as s,b9 as b,bL as F,ar as q,bM as x,u as T}from"#entry";function _(n,t,o){const[e={},r]=typeof t=="string"?[{},t]:[t,o],a=p(()=>s(n)),u=p(()=>s(e.key)||"$f"+c([r,typeof a.value=="string"?a.value:"",...k(e)]));if(!e.baseURL&&typeof a.value=="string"&&a.value[0]==="/"&&a.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:y,default:v,transform:w,pick:g,watch:f,immediate:A,getCachedData:D,deep:O,dedupe:E,...$}=e,h=b({...F,...$,cache:typeof e.cache=="boolean"?void 0:e.cache}),j={server:m,lazy:y,default:v,transform:w,pick:g,immediate:A,getCachedData:D,deep:O,dedupe:E,watch:f===!1?[]:[...f||[],h]};let i;return q(f===!1?u.value:u,()=>{i?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),i=typeof AbortController<"u"?new AbortController:{};const d=s(e.timeout);let l;return d&&(l=setTimeout(()=>i.abort(new DOMException("Request aborted due to timeout.","AbortError")),d),i.signal.onabort=()=>clearTimeout(l)),(e.$fetch||globalThis.$fetch)(a.value,{signal:i.signal,...h}).finally(()=>{clearTimeout(l)})},j)}function k(n){const t=[s(n.method)?.toUpperCase()||"GET",s(n.baseURL)];for(const o of[n.params||n.query]){const e=s(o);if(!e)continue;const r={};for(const[a,u]of Object.entries(e))r[s(a)]=s(u);t.push(r)}if(n.body){const o=s(n.body);if(!o)t.push(c(o));else if(o instanceof ArrayBuffer)t.push(c(Object.fromEntries([...new Uint8Array(o).entries()].map(([e,r])=>[e,r.toString()]))));else if(o instanceof FormData){const e={};for(const r of o.entries()){const[a,u]=r;e[a]=u instanceof File?u.name:u}t.push(c(e))}else if(x(o))t.push(c(b(o)));else try{t.push(c(o))}catch{console.warn("[useFetch] Failed to hash body",o)}}return t}function G(n,t,o="value",e="label"){if(["",void 0,"undefined",null,"null"].includes(t)||n===null||!Array.isArray(n))return"";const r=n.find(a=>a[o]===t);return r?r[e]:t}function M(n,t){return _(n,{...t,$fetch:T().$api},"$Gt4jHrdoGo")}export{G as f,M as u};
